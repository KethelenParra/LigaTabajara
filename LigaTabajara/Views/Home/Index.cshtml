@model LigaTabajara.Controllers.HomeIndexViewModel
@{
    ViewBag.Title = "Home - Liga Tabajara";
}

<h2>Liga Tabajara de Futebol</h2>

<section>
    <h3>Classificação dos Times</h3>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Posição</th>
                <th>Time</th>
                <th>Pontos</th>
                <th>Saldo de Gols</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            @{
                int pos = 1;
                foreach (var stat in Model.TeamStats)
                {
                    <tr>
                        <td>@pos</td>
                        <td>@Html.ActionLink(stat.Time.Nome, "Details", "Times", new { id = stat.Time.Id }, null)</td>
                        <td>@stat.Points</td>
                        <td>
                            @Html.ActionLink(stat.GoalDifference.ToString(), "Index", "EstatisticaJogoes", new { teamId = stat.Time.Id }, null)
                        </td>
                        <td>@(stat.IsApto ? "Apto" : "Não Apto")</td>
                    </tr>
                    pos++;
                }
            }
        </tbody>
    </table>
</section>

<section>
    <h3>Agenda de Partidas (38 Rodadas)</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Data</th>
                <th>Mandante</th>
                <th>Visitante</th>
                <th>Placar</th>
                <th>Resultado</th>
                <th>Detalhes</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var partida in Model.Schedule)
            {
                <tr>
                    <td>@partida.DataPartida.ToString("dd/MM/yyyy")</td>
                    <td>@partida.TimeMandante.Nome</td>
                    <td>@partida.TimeVisitante.Nome</td>
                    <td>
                        @(partida.GolsMandante.HasValue ? partida.GolsMandante.Value.ToString() : "-")
                        x
                        @(partida.GolsVisitante.HasValue ? partida.GolsVisitante.Value.ToString() : "-")
                    </td>
                    <td>
                        @if (partida.GolsMandante.HasValue && partida.GolsVisitante.HasValue)
                        {
                            if (partida.GolsMandante > partida.GolsVisitante)
                            {
                                @:Vitória do @partida.TimeMandante.Nome
                            }
                            else if (partida.GolsMandante < partida.GolsVisitante)
                            {
                                @:Vitória do @partida.TimeVisitante.Nome
                            }
                            else
                            {
                                @:Empate
                            }
                        }
                        else
                        {
                            @:-  <!-- ou “Não jogado” -->
                        }
                    </td>
                    <td>
                        @Html.ActionLink("Detalhes", "Details", "Partidas", new { id = partida.Id }, new { @class = "btn btn-info btn-sm" })
                    </td>
                </tr>
            }
        </tbody>
    </table>
</section>
